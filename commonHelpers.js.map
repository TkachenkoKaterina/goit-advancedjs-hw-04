{"version":3,"file":"commonHelpers.js","sources":["../src/index.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport axios from 'axios';\n\nconst elements = {\n  form: document.querySelector('#search-form'),\n  btnSearch: document.querySelector('button[type = submit]'),\n  gallery: document.querySelector('.gallery'),\n};\n\nconst BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = '32131085-77c33ae4af62fbdfe36accafe';\n\nelements.form.addEventListener('submit', onSubmit);\n\nfunction onSubmit(event) {\n  event.preventDefault();\n  elements.gallery.innerHTML = '';\n  const data = {};\n  const formData = new FormData(event.currentTarget);\n  formData.forEach((val, key) => {\n    data[key] = val;\n  });\n  servicePixabay(data);\n  elements.btnSearch.disabled = true;\n}\n\nasync function servicePixabay({ searchQuery }) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n  return axios\n    .get(`${BASE_URL}?${params}`)\n    .then(response => {\n      if (response.data.total === 0) {\n        console.log(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n\n        return;\n      } else if (response.data.total > 0) {\n        console.log('More 1');\n        console.log(response.data.hits);\n        elements.gallery.innerHTML = renderGallery(response.data.hits);\n      }\n      //   console.log(response.data);\n    })\n    .catch(error => {\n      console.error('Error fetching data:', error);\n    })\n    .finally(() => {\n      elements.btnSearch.disabled = false;\n    });\n}\n\nfunction renderGallery(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<div class=\"photo-card\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        <div class=\"info\">\n            <p class=\"info-item\">\n            <b>Likes: ${likes}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Views: ${views}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Comments: ${comments}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Downloads: ${downloads}</b>\n            </p>\n        </div>\n    </div>\n    `\n    )\n    .join('');\n}\n"],"names":["elements","BASE_URL","API_KEY","onSubmit","event","data","val","key","servicePixabay","searchQuery","params","axios","response","renderGallery","error","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"svBAGA,MAAMA,EAAW,CACf,KAAM,SAAS,cAAc,cAAc,EAC3C,UAAW,SAAS,cAAc,uBAAuB,EACzD,QAAS,SAAS,cAAc,UAAU,CAC5C,EAEMC,EAAW,0BACXC,EAAU,qCAEhBF,EAAS,KAAK,iBAAiB,SAAUG,CAAQ,EAEjD,SAASA,EAASC,EAAO,CACvBA,EAAM,eAAc,EACpBJ,EAAS,QAAQ,UAAY,GAC7B,MAAMK,EAAO,CAAA,EACI,IAAI,SAASD,EAAM,aAAa,EACxC,QAAQ,CAACE,EAAKC,IAAQ,CAC7BF,EAAKE,GAAOD,CAChB,CAAG,EACDE,EAAeH,CAAI,EACnBL,EAAS,UAAU,SAAW,EAChC,CAEA,eAAeQ,EAAe,CAAE,YAAAC,GAAe,CAC7C,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKR,EACL,EAAGO,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EACD,OAAOE,EACJ,IAAI,GAAGV,KAAYS,GAAQ,EAC3B,KAAKE,GAAY,CAChB,GAAIA,EAAS,KAAK,QAAU,EAAG,CAC7B,QAAQ,IACN,0EACV,EAEQ,MACD,MAAUA,EAAS,KAAK,MAAQ,IAC/B,QAAQ,IAAI,QAAQ,EACpB,QAAQ,IAAIA,EAAS,KAAK,IAAI,EAC9BZ,EAAS,QAAQ,UAAYa,EAAcD,EAAS,KAAK,IAAI,EAGrE,CAAK,EACA,MAAME,GAAS,CACd,QAAQ,MAAM,uBAAwBA,CAAK,CACjD,CAAK,EACA,QAAQ,IAAM,CACbd,EAAS,UAAU,SAAW,EACpC,CAAK,CACL,CAEA,SAASa,EAAcE,EAAK,CAC1B,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA,oBACQN,WAAsBE;AAAA;AAAA;AAAA,wBAGlBC;AAAA;AAAA;AAAA,wBAGAC;AAAA;AAAA;AAAA,2BAGGC;AAAA;AAAA;AAAA,4BAGCC;AAAA;AAAA;AAAA;AAAA,KAKvB,EACA,KAAK,EAAE,CACZ"}