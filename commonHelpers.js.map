{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport '../node_modules/izitoast/dist/css/iziToast.min.css';\n\nconst elements = {\n  loader: document.querySelector('.loader'),\n  error: document.querySelector('.error'),\n  cat: document.querySelector('.cat-info'),\n};\n\nconst BASE_URL = 'https://api.thecatapi.com/v1';\nconst API_KEY =\n  'live_RjEIYRa9UIQiuCs0GBjhWjiTFUMeoAxHOIJdhn6UnuIPCQmVsxmCCshAFLBdwlby';\n\naxios.defaults.headers.common['x-api-key'] = API_KEY;\nlet errorShown = false;\n\nfunction fetchBreeds() {\n  const END_POINT = '/breeds';\n  return axios\n    .get(`${BASE_URL}${END_POINT}`)\n    .then(response => response.data)\n    .catch(error => {\n      handleError();\n      throw new Error(error.message);\n    });\n}\n\nfunction fetchCatByBreed(breedId) {\n  if (!breedId) {\n    return Promise.resolve(); // Return a resolved promise if breedId is falsy\n  }\n  const END_POINT = '/images/search';\n  const params = { breed_ids: breedId };\n  return axios\n    .get(`${BASE_URL}${END_POINT}`, { params })\n    .then(response => response.data)\n    .catch(error => {\n      handleError();\n      throw new Error(error.message);\n    });\n}\n\nfunction handleError() {\n  if (!errorShown) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Oops! Something went wrong! Try reloading the page!',\n      position: 'topRight',\n      timeout: 5000,\n      closeOnClick: true,\n    });\n    errorShown = true;\n  }\n}\n\nexport { fetchBreeds, fetchCatByBreed };\n","import { fetchBreeds, fetchCatByBreed } from '/cat-api';\nimport SlimSelect from 'slim-select';\nimport '../node_modules/slim-select/dist/slimselect.css';\n\nconst elements = {\n  breedSelect: document.querySelector('.breed-select'),\n  loader: document.querySelector('.loader'),\n  error: document.querySelector('.error'),\n  cat: document.querySelector('.cat-info'),\n};\n\nlet breedSelected = false;\n\nfunction onSelect(value) {\n  elements.cat.innerHTML = '';\n  makeCatCard(value);\n  breedSelected = true;\n}\n\nconst slimSelect = new SlimSelect({\n  select: '.breed-select',\n  settings: {\n    placeholderText: 'Select a breed',\n  },\n});\n\nslimSelect.selectEl.addEventListener('change', event => {\n  onSelect(event.target.value);\n});\n\nfunction makeCatCard(breedId) {\n  if (!breedSelected) return;\n  showLoader();\n  return fetchCatByBreed(breedId)\n    .then(data => {\n      elements.cat.innerHTML = createCatCardMarkup(data);\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n\nfunction createCatCardMarkup(arr) {\n  if (!arr || arr.length === 0) {\n    return '<p>No information available for this breed.</p>';\n  }\n  const { description, name, temperament } = arr[0].breeds[0];\n\n  return `\n    <img src=\"${arr[0].url}\" alt=\"${name}\" width=\"350\"/>\n    <h1 class=\"cat-info_name-breed\">${name}</h1>\n    <p class=\"cat-info_description\">${description}</p>\n    <p class=\"cat-info_name-habbit\">${temperament}</p>\n  `;\n}\n\nfunction init() {\n  showLoader();\n  fetchBreeds()\n    .then(data => {\n      const selectData = data.map(({ id, name }) => ({\n        text: name,\n        value: id,\n      }));\n      slimSelect.setData(selectData);\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n\ninit();\n\nfunction showLoader() {\n  elements.loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  elements.loader.style.display = 'none';\n}\n"],"names":["BASE_URL","API_KEY","axios","errorShown","fetchBreeds","END_POINT","response","error","handleError","fetchCatByBreed","breedId","params","iziToast","elements","breedSelected","onSelect","value","makeCatCard","slimSelect","SlimSelect","event","showLoader","data","createCatCardMarkup","hideLoader","arr","description","name","temperament","init","selectData","id"],"mappings":"+vBAKU,SAAS,cAAc,SAAS,EACjC,SAAS,cAAc,QAAQ,EACjC,SAAS,cAAc,WAAW,EAGzC,MAAMA,EAAW,+BACXC,EACJ,wEAEFC,EAAM,SAAS,QAAQ,OAAO,aAAeD,EAC7C,IAAIE,EAAa,GAEjB,SAASC,GAAc,CACrB,MAAMC,EAAY,UAClB,OAAOH,EACJ,IAAI,GAAGF,IAAWK,GAAW,EAC7B,KAAKC,GAAYA,EAAS,IAAI,EAC9B,MAAMC,GAAS,CACd,MAAAC,IACM,IAAI,MAAMD,EAAM,OAAO,CACnC,CAAK,CACL,CAEA,SAASE,EAAgBC,EAAS,CAChC,GAAI,CAACA,EACH,OAAO,QAAQ,UAEjB,MAAML,EAAY,iBACZM,EAAS,CAAE,UAAWD,GAC5B,OAAOR,EACJ,IAAI,GAAGF,IAAWK,IAAa,CAAE,OAAAM,EAAQ,EACzC,KAAKL,GAAYA,EAAS,IAAI,EAC9B,MAAMC,GAAS,CACd,MAAAC,IACM,IAAI,MAAMD,EAAM,OAAO,CACnC,CAAK,CACL,CAEA,SAASC,GAAc,CAChBL,IACHS,EAAS,MAAM,CACb,MAAO,QACP,QAAS,sDACT,SAAU,WACV,QAAS,IACT,aAAc,EACpB,CAAK,EACDT,EAAa,GAEjB,CClDA,MAAMU,EAAW,CACf,YAAa,SAAS,cAAc,eAAe,EACnD,OAAQ,SAAS,cAAc,SAAS,EACxC,MAAO,SAAS,cAAc,QAAQ,EACtC,IAAK,SAAS,cAAc,WAAW,CACzC,EAEA,IAAIC,EAAgB,GAEpB,SAASC,EAASC,EAAO,CACvBH,EAAS,IAAI,UAAY,GACzBI,EAAYD,CAAK,EACjBF,EAAgB,EAClB,CAEA,MAAMI,EAAa,IAAIC,EAAW,CAChC,OAAQ,gBACR,SAAU,CACR,gBAAiB,gBAClB,CACH,CAAC,EAEDD,EAAW,SAAS,iBAAiB,SAAUE,GAAS,CACtDL,EAASK,EAAM,OAAO,KAAK,CAC7B,CAAC,EAED,SAASH,EAAYP,EAAS,CAC5B,GAAKI,EACL,OAAAO,IACOZ,EAAgBC,CAAO,EAC3B,KAAKY,GAAQ,CACZT,EAAS,IAAI,UAAYU,EAAoBD,CAAI,CACvD,CAAK,EACA,QAAQ,IAAM,CACbE,GACN,CAAK,CACL,CAEA,SAASD,EAAoBE,EAAK,CAChC,GAAI,CAACA,GAAOA,EAAI,SAAW,EACzB,MAAO,kDAET,KAAM,CAAE,YAAAC,EAAa,KAAAC,EAAM,YAAAC,CAAa,EAAGH,EAAI,GAAG,OAAO,GAEzD,MAAO;AAAA,gBACOA,EAAI,GAAG,aAAaE;AAAA,sCACEA;AAAA,sCACAD;AAAA,sCACAE;AAAA,GAEtC,CAEA,SAASC,GAAO,CACdR,IACAjB,EAAa,EACV,KAAKkB,GAAQ,CACZ,MAAMQ,EAAaR,EAAK,IAAI,CAAC,CAAE,GAAAS,EAAI,KAAAJ,MAAY,CAC7C,KAAMA,EACN,MAAOI,CACR,EAAC,EACFb,EAAW,QAAQY,CAAU,CACnC,CAAK,EACA,QAAQ,IAAM,CACbN,GACN,CAAK,CACL,CAEAK,IAEA,SAASR,GAAa,CACpBR,EAAS,OAAO,MAAM,QAAU,OAClC,CAEA,SAASW,GAAa,CACpBX,EAAS,OAAO,MAAM,QAAU,MAClC"}