{"version":3,"file":"commonHelpers.js","sources":["../src/api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '32131085-77c33ae4af62fbdfe36accafe';\n\nasync function servicePixabay(searchQuery, page) {\n  return await axios.get(\n    `${BASE_URL}?key=${API_KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=40`\n  );\n}\n\nexport { servicePixabay };\n","import Notiflix from 'notiflix';\nimport '../node_modules/notiflix/dist/notiflix-3.2.6.min.css';\nimport axios from 'axios';\nimport { servicePixabay } from '/api';\n\nconst elements = {\n  form: document.querySelector('#search-form'),\n  btnSearch: document.querySelector('button[type = submit]'),\n  gallery: document.querySelector('.gallery'),\n  btnLoadMore: document.querySelector('.load-more'),\n};\n\nelements.form.addEventListener('submit', onSubmit);\n// elements.btnLoadMore.addEventListener('click', onLoadMore);\n\nelements.btnLoadMore.style.display = 'none';\n\nlet page = 1;\nlet currentPage;\nconst per_page = 40;\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  elements.gallery.innerHTML = '';\n\n  page = 1;\n  const formData = new FormData(event.currentTarget);\n  const searchQuery = formData.get('searchQuery');\n  console.log('searchQuery', searchQuery);\n\n  try {\n    const { data } = await servicePixabay(searchQuery, page);\n    console.log('data', data);\n    elements.gallery.insertAdjacentHTML('beforeend', createGallery(data.hits));\n\n    if (data.totalHits > per_page) {\n      elements.btnLoadMore.style.display = 'block';\n      let totalPages = data.totalHits / per_page;\n      console.log(`Total pages = ${Math.ceil(totalPages)}`);\n    } else if (data.totalHits < per_page) {\n      elements.btnLoadMore.style.display = 'none';\n      console.log('This is the last page of Gallery');\n    }\n  } catch (error) {\n    console.log(error);\n    console.log(error.message);\n  }\n}\n\nfunction createGallery(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<div class=\"photo-card\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" width=\"150\"/>\n        <div class=\"info\">\n            <p class=\"info-item\">\n            <b>Likes: ${likes}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Views: ${views}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Comments: ${comments}</b>\n            </p>\n            <p class=\"info-item\">\n            <b>Downloads: ${downloads}</b>\n            </p>\n        </div>\n    </div>\n    `\n    )\n    .join('');\n}\n\n// async function onLoadMore() {\n//   const searchQuery = elements.form.elements.searchQuery.value;\n//   page += 1;\n//   console.log(searchQuery);\n\n//   try {\n//     const response = await servicePixabay({ searchQuery });\n//     console.log(response);\n\n//     if (response.data.totalHits === 0) {\n//       notifyUser(\n//         'Sorry, there are no images matching your search query. Please try again.'\n//       );\n//       return;\n//     }\n\n//     elements.gallery.insertAdjacentHTML(\n//       'beforeend',\n//       renderGallery(response.data.hits)\n//     );\n//   } catch (error) {\n//     console.error('Error loading more data:', error);\n//   }\n// }\n"],"names":["BASE_URL","API_KEY","servicePixabay","searchQuery","page","axios","elements","onSubmit","per_page","event","data","createGallery","totalPages","error","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"svBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAEhB,eAAeC,EAAeC,EAAaC,EAAM,CAC/C,OAAO,MAAMC,EAAM,IACjB,GAAGL,SAAgBC,OAAaE,kEAA4EC,eAChH,CACA,CCJA,MAAME,EAAW,CACf,KAAM,SAAS,cAAc,cAAc,EAC3C,UAAW,SAAS,cAAc,uBAAuB,EACzD,QAAS,SAAS,cAAc,UAAU,EAC1C,YAAa,SAAS,cAAc,YAAY,CAClD,EAEAA,EAAS,KAAK,iBAAiB,SAAUC,CAAQ,EAGjDD,EAAS,YAAY,MAAM,QAAU,OAErC,IAAIF,EAAO,EAEX,MAAMI,EAAW,GAEjB,eAAeD,EAASE,EAAO,CAC7BA,EAAM,eAAc,EACpBH,EAAS,QAAQ,UAAY,GAE7BF,EAAO,EAEP,MAAMD,EADW,IAAI,SAASM,EAAM,aAAa,EACpB,IAAI,aAAa,EAC9C,QAAQ,IAAI,cAAeN,CAAW,EAEtC,GAAI,CACF,KAAM,CAAE,KAAAO,CAAI,EAAK,MAAMR,EAAeC,EAAaC,CAAI,EAIvD,GAHA,QAAQ,IAAI,OAAQM,CAAI,EACxBJ,EAAS,QAAQ,mBAAmB,YAAaK,EAAcD,EAAK,IAAI,CAAC,EAErEA,EAAK,UAAYF,EAAU,CAC7BF,EAAS,YAAY,MAAM,QAAU,QACrC,IAAIM,EAAaF,EAAK,UAAYF,EAClC,QAAQ,IAAI,iBAAiB,KAAK,KAAKI,CAAU,GAAG,CAC1D,MAAeF,EAAK,UAAYF,IAC1BF,EAAS,YAAY,MAAM,QAAU,OACrC,QAAQ,IAAI,kCAAkC,EAEjD,OAAQO,EAAP,CACA,QAAQ,IAAIA,CAAK,EACjB,QAAQ,IAAIA,EAAM,OAAO,CAC1B,CACH,CAEA,SAASF,EAAcG,EAAK,CAC1B,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA,oBACQN,WAAsBE;AAAA;AAAA;AAAA,wBAGlBC;AAAA;AAAA;AAAA,wBAGAC;AAAA;AAAA;AAAA,2BAGGC;AAAA;AAAA;AAAA,4BAGCC;AAAA;AAAA;AAAA;AAAA,KAKvB,EACA,KAAK,EAAE,CACZ"}